---
const whatsappSoluciones = 'https://wa.me/573172247166?text=Hola%2C%20quiero%20conocer%20las%20soluciones%20de%20Feral%20Tech';
const whatsappExperto = 'https://wa.me/573172247166?text=Hola%2C%20quiero%20conversar%20con%20un%20experto%20de%20Feral%20Tech';

import { Image } from 'astro:assets';
import isotype from '../assets/branding/isotype_clear.png';

const technologies = [
  "Diseño Web",
  "Automatizaciones",
  "Odoo",
  "Google Workspace",
  "Amazon Web Services",
  "Microsoft Azure",
  "Inteligencia Artificial"
];
---

<script>
  import { animate, inView, stagger } from "motion";

  // Elements to animate
  const title = document.querySelector("#hero-title");
  const subtitle = document.querySelector("#hero-subtitle");
  const buttons = document.querySelector("#hero-buttons");
  const tags = document.querySelector("#hero-tags");
  const stats = document.querySelectorAll(".hero-stat");
  const logo = document.querySelector("#hero-logo");

  // Initial sequence
  animate(
    [
      [logo, { opacity: [0, 1], scale: [0.8, 1] }, { duration: 0.8 }],
      [title, { opacity: [0, 1], y: [20, 0] }, { duration: 0.8, at: "-0.4" }],
      [subtitle, { opacity: [0, 1], y: [20, 0] }, { duration: 0.8, at: "-0.6" }],
      [buttons, { opacity: [0, 1], y: [20, 0] }, { duration: 0.8, at: "-0.6" }],
      [tags, { opacity: [0, 1], y: [20, 0] }, { duration: 0.8, at: "-0.6" }],
    ]
  );

  // Stagger stats
  inView(".hero-stat", (info) => {
    animate(info.target, { opacity: [0, 1], y: [20, 0] }, { duration: 0.5, delay: stagger(0.1) });
  });
</script>

<section id="inicio" class="relative min-h-screen flex items-center overflow-hidden">
  <!-- Background gradient -->
  <div class="absolute inset-0 bg-gradient-to-br from-feral-dark via-feral-dark to-feral-steel/20"></div>

  <!-- Decorative elements -->
  <div class="absolute top-1/4 -right-32 h-[500px] w-[500px] rounded-full bg-feral-turquoise/5 blur-3xl animate-pulse-slow"></div>
  <div class="absolute bottom-1/4 -left-32 h-[400px] w-[400px] rounded-full bg-feral-steel/10 blur-3xl animate-pulse-slow" style="animation-delay: 2s;"></div>
  
  <!-- Grid pattern overlay -->
  <div class="absolute inset-0 opacity-[0.03]" style="background-image: radial-gradient(circle, #9BB1FF 1px, transparent 1px); background-size: 40px 40px;"></div>

  <div class="section-container relative z-10 pt-32 pb-20 sm:pt-40 sm:pb-24 lg:pt-48 lg:pb-32">
    <div class="mx-auto max-w-5xl text-center">
      
      <!-- Isotype Logo -->
      <div id="hero-logo" class="mx-auto mb-8 h-20 w-20 sm:h-24 sm:w-24 flex items-center justify-center opacity-0 transform-gpu transition-transform duration-300 hover:scale-110">
         <Image src={isotype} alt="Feral Tech Isotype" class="h-full w-full object-contain drop-shadow-lg" />
      </div>

      <!-- Title -->
      <h1 id="hero-title" class="text-4xl font-bold leading-tight tracking-tight sm:text-5xl md:text-6xl lg:text-7xl opacity-0 transform-gpu">
        Transformamos tu empresa
        
        <span class="bg-gradient-to-r from-feral-turquoise to-feral-sky bg-clip-text text-transparent">
          del caos al control total
        </span>
      </h1>

      <!-- Subtitle -->
      <p id="hero-subtitle" class="mx-auto mt-6 max-w-2xl text-base text-white/70 sm:mt-8 sm:text-lg md:text-xl opacity-0 transform-gpu">
        Tecnología estratégica y sistemas bien implementados para operar con precisión, eficiencia y dominio.
      </p>

      <!-- CTA Buttons -->
      <div id="hero-buttons" class="mt-10 flex flex-col items-center gap-4 sm:mt-10 sm:flex-row sm:justify-center opacity-0 transform-gpu">
        <a href={whatsappSoluciones} target="_blank" rel="noopener noreferrer" class="btn-primary w-full sm:w-auto hover:scale-105 transition-transform duration-300">
          <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>
          Toma el control ahora
        </a>
      </div>

      <!-- Infinite Scroll Logos -->
      <div id="hero-tags" class="mt-16 w-full overflow-hidden opacity-0 transform-gpu">
        <p class="text-sm text-white/70 mb-6 uppercase tracking-widest font-medium">Tecnologías que dominamos</p>
        <div class="relative flex overflow-x-hidden group" style="mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent); -webkit-mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent);">
            <div class="animate-marquee whitespace-nowrap flex">
              <!-- First Set -->
              <div class="flex items-center gap-12 sm:gap-20 pr-12 sm:pr-20">
                {technologies.map((tech) => (
                  <span class="text-2xl font-bold text-white/30 hover:text-white transition-colors duration-300 cursor-default">
                    {tech}
                  </span>
                ))}
              </div>

              <!-- Duplicate Set for Seamless Loop -->
              <div class="flex items-center gap-12 sm:gap-20 pr-12 sm:pr-20" aria-hidden="true">
                {technologies.map((tech) => (
                  <span class="text-2xl font-bold text-white/30 hover:text-white transition-colors duration-300 cursor-default">
                    {tech}
                  </span>
                ))}
              </div>
            </div>
        </div>
      </div>

    </div>
  </div>

</section>
